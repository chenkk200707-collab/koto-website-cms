{{ define "main" }}
<style>
    /* === 1. å®‰å…¨é…è‰²å˜é‡ (åªåœ¨å½“å‰ç»„ä»¶å†…ç”Ÿæ•ˆ) === */
    .koto-wrapper {
        --koto-red: #C41E3A;       /* æ‚¨çš„å“ç‰Œçº¢ */
        --koto-dark: #2C3E50;      /* æ·±è‰²æ–‡å­— */
        --koto-bg: #FFFFFF;
        --koto-gray: #F5F7FA;
    }

    /* === 2. Hero è½®æ’­å›¾ (å¤åˆ»æˆªå›¾å¸ƒå±€ï¼šå±…ä¸­æ–¹å—) === */
    .koto-hero-container {
        position: relative;
        width: 100%;
        height: 600px; /* å›ºå®šé«˜åº¦ï¼Œé˜²æ­¢é¡µé¢è·³åŠ¨ */
        overflow: hidden;
        background-color: var(--koto-gray);
    }

    .koto-slide {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        opacity: 0; /* é»˜è®¤éšè— */
        transition: opacity 0.8s ease-in-out; /* æŸ”å’Œçš„æ·¡å…¥æ·¡å‡º */
        display: flex;
        align-items: center;
        justify-content: center;
        background-size: cover;
        background-position: center;
        z-index: 1;
    }

    /* æ¿€æ´»çŠ¶æ€çš„å¹»ç¯ç‰‡ */
    .koto-slide.active {
        opacity: 1;
        z-index: 2;
    }

    /* å±…ä¸­å†…å®¹æ–¹å— (ä»¿ç…§æ‚¨æˆªå›¾çš„æ ·å¼ï¼Œä½†æ˜¯çº¢è‰²ç‰ˆ) */
    .koto-hero-box {
        background: rgba(196, 30, 58, 0.9); /* çº¢è‰²åŠé€æ˜èƒŒæ™¯ */
        color: white;
        padding: 3rem 4rem;
        border-radius: 12px;
        text-align: center;
        max-width: 600px;
        box-shadow: 0 15px 35px rgba(0,0,0,0.2);
        backdrop-filter: blur(5px); /* æ¯›ç»ç’ƒè´¨æ„Ÿ */
        transform: translateY(20px);
        opacity: 0;
        transition: all 0.8s 0.3s; /* å†…å®¹æ¯”èƒŒæ™¯æ™šä¸€ç‚¹å‡ºç°ï¼Œæ›´æœ‰è´¨æ„Ÿ */
    }

    .koto-slide.active .koto-hero-box {
        transform: translateY(0);
        opacity: 1;
    }

    .koto-hero-box h2 {
        font-size: 2.5rem;
        margin: 0 0 1rem 0;
        font-weight: 800;
        line-height: 1.2;
        color: white;
    }

    .koto-hero-box p {
        font-size: 1.1rem;
        margin-bottom: 2rem;
        opacity: 0.9;
        line-height: 1.6;
        color: #ffeaea;
    }

    .koto-hero-btn {
        display: inline-block;
        background: white;
        color: var(--koto-red);
        padding: 12px 35px;
        border-radius: 50px;
        font-weight: bold;
        text-decoration: none;
        transition: transform 0.2s;
    }
    .koto-hero-btn:hover {
        transform: scale(1.05);
        background: #fff0f0;
    }

    /* è½®æ’­æŒ‡ç¤ºå™¨ (åº•éƒ¨å°åœ†ç‚¹) */
    .koto-indicators {
        position: absolute;
        bottom: 30px;
        left: 50%;
        transform: translateX(-50%);
        z-index: 10;
        display: flex;
        gap: 12px;
    }
    .koto-dot {
        width: 12px;
        height: 12px;
        background: rgba(255,255,255,0.5);
        border-radius: 50%;
        cursor: pointer;
        transition: all 0.3s;
    }
    .koto-dot.active {
        background: var(--koto-red);
        transform: scale(1.2);
    }

    /* === 3. æœåŠ¡å¡ç‰‡åŒº (ä¿æŒæ‚¨å–œæ¬¢çš„åŸç‰ˆ) === */
    <section class="koto-section" style="text-align: center;"> <h2 style="
            background-color: var(--koto-red); 
            color: white; 
            display: inline-block; 
            padding: 15px 50px; 
            border-radius: 8px; 
            margin-bottom: 50px; 
            font-size: 2rem;
            box-shadow: 0 5px 15px rgba(196, 30, 58, 0.3);
        ">
            æˆ‘ä»¬çš„æ ¸å¿ƒæœåŠ¡
        </h2>

        <div class="koto-grid" style="text-align: left;"> <div class="koto-card">
                <img src="/images/icon-ca.png" alt="Icon" onerror="this.src='https://via.placeholder.com/64'">
                <h3>åŠ æ‹¿å¤§ç§»æ°‘</h3>
                <p>å¿«é€Ÿé€šé“ (EE)ã€çœæå (PNP)ã€å®¶åº­å›¢èšåŠé…å¶å·¥ç­¾å…¨ç±»åˆ«åŠç†ã€‚</p>
            </div>
            <div class="koto-card">
                <img src="/images/icon-study.png" alt="Icon" onerror="this.src='https://via.placeholder.com/64'">
                <h3>ç•™å­¦è§„åˆ’</h3>
                <p>æ¶µç›–K-12ã€æœ¬ç§‘ã€ç¡•åšç”³è¯·ï¼Œä»¥åŠé™ªè¯»ç­¾è¯åŠç†ã€‚</p>
            </div>
            <div class="koto-card">
                <img src="/images/icon-english.png" alt="Icon" onerror="this.src='https://via.placeholder.com/64'">
                <h3>è¯­è¨€åŸ¹è®­</h3>
                <p>é›…æ€ã€æ€åŸ¹ã€å¤šé‚»å›½åå¸ˆä¸€å¯¹ä¸€ï¼ŒçŸ­æœŸå¿«é€Ÿæåˆ†ã€‚</p>
            </div>
            <div class="koto-card">
                <img src="/images/icon-us.png" alt="Icon" onerror="this.src='https://via.placeholder.com/64'">
                <h3>ç¾å›½ä¸šåŠ¡</h3>
                <p>EB-1A æ°å‡ºäººæ‰ã€NIW å›½å®¶åˆ©ç›Šè±å…åŠ L1 è·¨å›½é«˜ç®¡ç­¾è¯ã€‚</p>
            </div>
        </div>
    </section>
    
    /* === 4. æ–°é—»æ»‘å— (æ¨ªå‘æ»šåŠ¨ç‰ˆ) === */
    .koto-news-wrapper {
        display: flex;
        overflow-x: auto;
        gap: 25px;
        padding: 10px 5px 30px 5px;
        scroll-snap-type: x mandatory;
    }
    .koto-news-item {
        min-width: 300px;
        max-width: 300px;
        background: white;
        border-radius: 12px;
        box-shadow: 0 4px 15px rgba(0,0,0,0.05);
        overflow: hidden;
        flex-shrink: 0;
        scroll-snap-align: start;
        transition: transform 0.3s;
    }
    .koto-news-item:hover { transform: translateY(-5px); }
</style>

<div class="koto-wrapper">
    
    <div class="koto-hero-container" id="kotoHero">
        
        <div class="koto-slide active" style="background-color: #f3f4f6;">
            <div class="koto-hero-box">
                <h2>ä¸“ä¸šç§»æ°‘è§„åˆ’</h2>
                <p>åŸºäºå®˜æ–¹ CRS æ ‡å‡†çš„ç²¾å‡†æ‰“åˆ†ï¼Œä¸ºæ‚¨é‡èº«å®šåˆ¶æœ€ç¨³å¦¥çš„ç§»æ°‘è·¯å¾„ã€‚</p>
                <a href="/assessment" class="koto-hero-btn">å…è´¹è¯„ä¼° &rarr;</a>
            </div>
        </div>

        <div class="koto-slide" style="background-color: #e5e7eb;">
            <div class="koto-hero-box">
                <h2>ç¾åŠ åæ ¡ç›´é€šè½¦</h2>
                <p>ä»é€‰æ ¡åˆ°æ–‡ä¹¦ï¼Œä»ç”³è¯·åˆ°å­¦ç­¾ï¼Œæˆ‘ä»¬åŠ©æ‚¨å©å¼€ä¸–ç•Œåæ ¡çš„å¤§é—¨ã€‚</p>
                <a href="/services" class="koto-hero-btn">æŸ¥çœ‹ç•™å­¦æœåŠ¡</a>
            </div>
        </div>

        <div class="koto-slide" style="background-color: #d1d5db;">
            <div class="koto-hero-box">
                <h2>ç–‘éš¾ç­¾è¯ä¸“å®¶</h2>
                <p>æ›¾ç»è¢«æ‹’ç­¾ï¼Ÿä¸ç”¨æ‹…å¿ƒã€‚æˆ‘ä»¬çš„æŒç‰Œé¡¾é—®æ“…é•¿å¤„ç†å„ç±»ç–‘éš¾æ‚ç—‡ã€‚</p>
                <a href="/contact" class="koto-hero-btn">é¢„çº¦å’¨è¯¢</a>
            </div>
        </div>

        <div class="koto-indicators">
            <span class="koto-dot active" onclick="setSlide(0)"></span>
            <span class="koto-dot" onclick="setSlide(1)"></span>
            <span class="koto-dot" onclick="setSlide(2)"></span>
        </div>
    </div>

    <section class="koto-section">
        <h2 style="text-align:center; color: var(--koto-red); margin-bottom: 50px; font-size: 2rem;">æˆ‘ä»¬çš„æ ¸å¿ƒæœåŠ¡</h2>
        <div class="koto-grid">
            <div class="koto-card">
                <img src="/images/icon-ca.png" alt="Icon" onerror="this.src='https://via.placeholder.com/64'">
                <h3>åŠ æ‹¿å¤§ç§»æ°‘</h3>
                <p>å¿«é€Ÿé€šé“ (EE)ã€çœæå (PNP)ã€å®¶åº­å›¢èšåŠé…å¶å·¥ç­¾å…¨ç±»åˆ«åŠç†ã€‚</p>
            </div>
            <div class="koto-card">
                <img src="/images/icon-study.png" alt="Icon" onerror="this.src='https://via.placeholder.com/64'">
                <h3>ç•™å­¦è§„åˆ’</h3>
                <p>æ¶µç›–K-12ã€æœ¬ç§‘ã€ç¡•åšç”³è¯·ï¼Œä»¥åŠé™ªè¯»ç­¾è¯åŠç†ã€‚</p>
            </div>
            <div class="koto-card">
                <img src="/images/icon-english.png" alt="Icon" onerror="this.src='https://via.placeholder.com/64'">
                <h3>è¯­è¨€åŸ¹è®­</h3>
                <p>é›…æ€ã€æ€åŸ¹ã€å¤šé‚»å›½åå¸ˆä¸€å¯¹ä¸€ï¼ŒçŸ­æœŸå¿«é€Ÿæåˆ†ã€‚</p>
            </div>
            <div class="koto-card">
                <img src="/images/icon-us.png" alt="Icon" onerror="this.src='https://via.placeholder.com/64'">
                <h3>ç¾å›½ä¸šåŠ¡</h3>
                <p>EB-1A æ°å‡ºäººæ‰ã€NIW å›½å®¶åˆ©ç›Šè±å…åŠ L1 è·¨å›½é«˜ç®¡ç­¾è¯ã€‚</p>
            </div>
        </div>
    </section>

    <section class="koto-section" style="background: #fafafa;">
        <h2 style="color: var(--koto-dark); margin-bottom: 30px;">æœ€æ–°ç§»æ°‘èµ„è®¯</h2>
        <div class="koto-news-wrapper">
            {{ range first 8 .Site.RegularPages }}
            <div class="koto-news-item">
                {{ $image := .Resources.GetMatch .Params.image }}
                {{ if $image }}
                    <img src="{{ $image.RelPermalink }}" style="height: 180px; width: 100%; object-fit: cover;">
                {{ else }}
                    <div style="height: 180px; background: #eee; display:flex; align-items:center; justify-content:center; color:#999;">Koto News</div>
                {{ end }}
                <div style="padding: 20px;">
                    <small style="color: #888; display:block; margin-bottom:5px;">ğŸ“… {{ .Date.Format "2006-01-02" }}</small>
                    <h3 style="font-size: 1.1rem; margin:0 0 10px 0; line-height: 1.4;">
                        <a href="{{ .Permalink }}" style="color: #2C3E50; text-decoration: none;">{{ .Title }}</a>
                    </h3>
                    <p style="font-size: 0.9rem; color: #666; overflow: hidden; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical;">{{ .Summary }}</p>
                </div>
            </div>
            {{ end }}
        </div>
    </section>

</div>

<script>
    document.addEventListener("DOMContentLoaded", function() {
        let slides = document.querySelectorAll('.koto-slide');
        let dots = document.querySelectorAll('.koto-dot');
        let current = 0;
        let timer;

        function showSlide(index) {
            // ç§»é™¤æ‰€æœ‰æ¿€æ´»çŠ¶æ€
            slides.forEach(s => s.classList.remove('active'));
            dots.forEach(d => d.classList.remove('active'));
            
            // æ¿€æ´»å½“å‰
            if (index >= slides.length) index = 0;
            if (index < 0) index = slides.length - 1;
            
            slides[index].classList.add('active');
            dots[index].classList.add('active');
            current = index;
        }

        function nextSlide() {
            showSlide(current + 1);
        }

        // å¯åŠ¨è‡ªåŠ¨æ’­æ”¾
        timer = setInterval(nextSlide, 4000);

        // ç»‘å®šç‚¹å‡»äº‹ä»¶ (å®‰å…¨æš´éœ²ç»™å…¨å±€)
        window.setSlide = function(index) {
            clearInterval(timer); // ç”¨æˆ·ç‚¹å‡»åæš‚åœä¸€ä¸‹è‡ªåŠ¨æ’­æ”¾
            showSlide(index);
            timer = setInterval(nextSlide, 4000);
        };
    });
</script>
{{ end }}
