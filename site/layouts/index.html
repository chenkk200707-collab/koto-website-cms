{{ define "main" }}
<style>
    /* æ ¸å¿ƒé…è‰² */
    :root {
        --primary: #C41E3A; 
        --secondary: #2C3E50;
        --bg: #FFFFFF;
        --light-gray: #F5F7FA;
    }

    /* Hero åŒºåŸŸ */
    .hero-section {
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 80px 10%;
        background-color: var(--light-gray);
        min-height: 500px;
    }
    .hero-text { flex: 1; padding-right: 50px; }
    .hero-text h1 { 
        font-size: 3.5rem; 
        color: var(--secondary); 
        margin-bottom: 20px; 
        line-height: 1.1; 
        font-weight: 800;
    }
    .hero-image img { width: 550px; max-width: 100%; height: auto; }

    /* æŒ‰é’® */
    .cta-button {
        background-color: var(--primary);
        color: white;
        padding: 18px 40px;
        border-radius: 50px;
        text-decoration: none;
        font-weight: bold;
        font-size: 1.1rem;
        display: inline-block;
        transition: transform 0.2s, box-shadow 0.2s;
        box-shadow: 0 4px 15px rgba(196, 30, 58, 0.3);
    }
    .cta-button:hover { 
        transform: translateY(-3px); 
        box-shadow: 0 8px 25px rgba(196, 30, 58, 0.4);
    }

    /* æœåŠ¡å¡ç‰‡ */
    .services-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
        gap: 40px;
        padding: 80px 10%;
        background: white;
    }
    .service-card {
        padding: 30px;
        border-radius: 20px;
        background: white;
        border: 1px solid #f0f0f0;
        text-align: center;
        transition: 0.3s;
    }
    .service-card:hover {
        transform: translateY(-10px);
        box-shadow: 0 20px 40px rgba(0,0,0,0.08);
        border-color: transparent;
    }
    .service-card img { width: 70px; margin-bottom: 20px; }
    .service-card h3 { color: var(--secondary); margin-bottom: 10px; }
    .service-card p { color: #666; font-size: 0.9rem; }

    /* ç§»åŠ¨ç«¯é€‚é… */
    @media (max-width: 768px) {
        .hero-section {
            flex-direction: column;
            padding: 60px 20px;
            text-align: center;
        }
        .hero-text { padding-right: 0; margin-bottom: 40px; }
        .hero-text h1 { font-size: 2.5rem; }
        .services-grid { padding: 60px 20px; }
    }
</style>

<section class="hero-section">
    <div class="hero-text">
        <h1>Expert Guidance for<br>Your Canadian Journey</h1>
        <p style="font-size: 1.2rem; color: #555; margin-bottom: 40px; max-width: 500px;">
            åŸºäºå®˜æ–¹ CRS æ ‡å‡†çš„ç²¾å‡†è§„åˆ’ã€‚ä»ç•™å­¦åˆ°ç§»æ°‘ï¼Œæˆ‘ä»¬ä¸ºæ‚¨å®šåˆ¶æœ€ä¼˜è·¯å¾„ã€‚
        </p>
        <a href="/assessment.html" class="cta-button">å¼€å§‹å…è´¹è¯„ä¼° &rarr;</a>
    </div>
    <div class="hero-image">
        <img src="/images/hero.png" alt="Consultant">
    </div>
</section>

<section class="services-grid">
    <div class="service-card">
        <img src="/images/icon-english.png" alt="English" style="width:60px; margin-bottom:15px;">
        <h3>é›…æ€/æ€åŸ¹æåˆ†</h3>
        <p>åå¸ˆä¸€å¯¹ä¸€ç²¾å‡†æŒ‡å¯¼ï¼Œé’ˆå¯¹æ€§çªç ´å£è¯­å†™ä½œç“¶é¢ˆï¼ŒåŠ©æ‚¨å¿«é€Ÿè¾¾åˆ°ç§»æ°‘åˆ†æ•°è¦æ±‚ã€‚</p>
    </div>
    <div class="service-card">
        <img src="/images/icon-study.png" alt="Study" style="width:60px; margin-bottom:15px;">
        <h3>ç¾åŠ ç•™å­¦è§„åˆ’</h3>
        <p>ä»å°å­¦åˆ°åšå£«çš„å…¨é¾„æ®µç”³è¯·æœåŠ¡ã€‚é¡¶å°–åæ ¡æ–‡ä¹¦å®šåˆ¶ï¼Œå­¦ç­¾åŠç†åŠæ‹’ç­¾ç¿»æ¡ˆã€‚</p>
    </div>
    <div class="service-card">
        <img src="/images/icon-ca.png" alt="Canada" style="width:60px; margin-bottom:15px;">
        <h3>åŠ æ‹¿å¤§ç§»æ°‘</h3>
        <p>å¿«é€Ÿé€šé“ (Express Entry)ã€çœæå (PNP)ã€å®¶åº­å›¢èšåŠé…å¶å·¥ç­¾å…¨ç±»åˆ«åŠç†ã€‚</p>
    </div>
    <div class="service-card">
        <img src="/images/icon-us.png" alt="USA" style="width:60px; margin-bottom:15px;">
        <h3>ç¾å›½ç§»æ°‘</h3>
        <p>æ°å‡ºäººæ‰ (EB-1)ã€å›½å®¶åˆ©ç›Šè±å… (NIW) åŠè·¨å›½é«˜ç®¡ç§»æ°‘ (L1/EB-1C) ä¸“ä¸šå’¨è¯¢ã€‚</p>
    </div>
</section>

<section style="padding: 80px 20px; background: #fafafa;">
    <div style="max-width: 1100px; margin: 0 auto;">
        
        <h2 style="color: var(--secondary); margin-bottom: 40px; text-align: center;">æœ€æ–°ç§»æ°‘èµ„è®¯</h2>
        
        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 30px;">
            {{ range first 3 .Site.RegularPages }}
            
            {{/* 1. è·å–å›¾ç‰‡è·¯å¾„ */}}
            {{ $img := .Params.image }}
            {{/* 2. è‡ªåŠ¨æŠ“å–é€»è¾‘ */}}
            {{ if not $img }}
                {{ $imgMatches := findRE `(?i)src="([^"]+)"` .Content 1 }}
                {{ if gt (len $imgMatches) 0 }}
                    {{ $img = index $imgMatches 0 | replaceRE `src="` "" | replaceRE `"` "" }}
                {{ end }}
            {{ end }}
            {{/* 3. å…œåº•é€»è¾‘ */}}
            {{ if not $img }}
                {{ $img = "/images/logo-koto.png" }}
            {{ end }}

            {{/* ğŸ› ï¸ å…³é”®ä¿®å¤ï¼šå¼ºåˆ¶æ£€æŸ¥å¹¶æ·»åŠ æ–œæ  */}}
            {{ if and $img (not (hasPrefix $img "/")) (not (hasPrefix $img "http")) }}
                {{ $img = printf "/%s" $img }}
            {{ end }}

            <div style="background: white; border-radius: 12px; overflow: hidden; box-shadow: 0 4px 20px rgba(0,0,0,0.05); transition: transform 0.3s ease;">
                <a href="{{ .Permalink }}" style="display: block; overflow: hidden;">
                    <img src="{{ $img }}" style="width: 100%; height: 200px; object-fit: cover; transition: transform 0.5s ease;">
                </a>
                
                <div style="padding: 25px;">
                    <h3 style="margin: 0 0 10px 0; font-size: 1.1rem; line-height: 1.4; height: 3.2em; overflow: hidden;">
                        <a href="{{ .Permalink }}" style="text-decoration: none; color: var(--secondary);">{{ .Title }}</a>
                    </h3>
                    <a href="{{ .Permalink }}" style="color: var(--primary); font-weight: bold; font-size: 0.9rem; text-decoration: none; display: inline-block; margin-top: 10px;">é˜…è¯»å…¨æ–‡ &rarr;</a>
                    
                    <p style="color: red; font-size: 0.7rem; margin-top: 5px;">Debug: {{ $img }}</p>
                </div>
            </div>
            {{ end }}
        </div>

    </div>
</section>
{{ end }}
