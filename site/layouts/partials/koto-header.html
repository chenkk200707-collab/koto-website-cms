<style>
    /* === 1. æ™ºèƒ½éšè—æ—§èœå• === */
    /* éšè—æ‰€æœ‰ <header> å’Œ <nav>ï¼Œä½†æ’é™¤æ‰æˆ‘ä»¬è‡ªå·±çš„ .koto-main-nav */
    header:not(.koto-main-nav), 
    nav:not(.koto-main-nav),
    .site-header, #header, .navbar { 
        display: none !important; 
    }

    /* === 2. KOTO èœå•æ ·å¼ === */
    :root { --k-red: #C41E3A; --k-dark: #2C3E50; }
    
    .koto-main-nav {
        background-color: white; height: 80px; padding: 0 5%;
        display: flex !important; /* å¼ºåˆ¶æ˜¾ç¤º */
        justify-content: space-between; align-items: center;
        box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        position: fixed; top: 0; left: 0; width: 100%; z-index: 99999; 
    }
    .nav-logo { height: 100%; display: flex; align-items: center; }
    .nav-logo img { height: 70px; width: auto; object-fit: contain; }
    
    .nav-links { display: flex; gap: 20px; align-items: center; }
    
    .nav-item {
        font-size: 1.05rem; font-weight: 800; color: var(--k-red); 
        padding: 5px 0; cursor: pointer; text-decoration: none;
        background: none; border: none; font-family: inherit;
    }
    .nav-item:hover { opacity: 0.8; }

    .nav-btn-cta {
        background-color: var(--k-red); color: white !important;
        padding: 10px 25px; border-radius: 50px; font-weight: 800; font-size: 1rem;
        box-shadow: 0 4px 12px rgba(196, 30, 58, 0.3);
    }
    .nav-btn-cta:hover { transform: scale(1.05); }

    /* === 3. å…¨å±€å¼¹çª—æ ·å¼ === */
    .g-modal-overlay {
        position: fixed; top: 0; left: 0; width: 100%; height: 100%;
        background: rgba(0,0,0,0.6); backdrop-filter: blur(5px);
        z-index: 100000; display: none; align-items: center; justify-content: center;
    }
    .g-modal-overlay.show { display: flex; }
    .g-modal-box {
        background: white; width: 90%; max-width: 400px; border-radius: 16px; 
        padding: 40px; text-align: center; position: relative;
        box-shadow: 0 20px 60px rgba(0,0,0,0.3);
    }
    .g-qr-box {
        width: 200px; height: 200px; background: #f9f9f9; margin: 20px auto; 
        display: flex; align-items: center; justify-content: center; overflow: hidden;
    }
    .g-qr-box img { width: 100%; height: 100%; object-fit: contain; }
</style>

<nav class="koto-main-nav">
    <div class="nav-logo">
        <a href="/">
            <img src="/images/logo-koto.png" alt="KOTO Logo">
        </a>
    </div>
    
    <div class="nav-links">
        <a href="/capsules/" class="nav-item">è‹±è¯­èƒ¶å›Š</a>
        
        <button onclick="openGlobalModal('åŒ—ç¾ç•™å­¦è§„åˆ’')" class="nav-item">åŒ—ç¾ç•™å­¦</button>
        
        <a href="/canada/" class="nav-item">åŠ æ‹¿å¤§ç§»æ°‘</a>
        <a href="/usa/" class="nav-item">ç¾å›½ç§»æ°‘</a>
        <a href="/cases/" class="nav-item">æˆåŠŸæ¡ˆä¾‹</a>
        
        <a href="{{ if .IsHome }}#page-bottom{{ else }}/#page-bottom{{ end }}" class="nav-btn-cta">é¢„çº¦å’¨è¯¢</a>
    </div>
</nav>

<div class="g-modal-overlay" id="globalModal">
    <div class="g-modal-box">
        <div style="position:absolute; top:15px; right:20px; font-size:1.5rem; color:#999; cursor:pointer;" onclick="closeGlobalModal()">&times;</div>
        <h3>é¢„çº¦å’¨è¯¢</h3>
        <p style="color:#666; margin-bottom:5px;">æ‚¨æ­£åœ¨å’¨è¯¢ï¼š</p>
        <p style="color:#C41E3A; font-weight:bold; margin-top:0;" id="gModalService">...</p>
        <div class="g-qr-box">
            <img src="/images/qrcode.png" alt="å®¢æœäºŒç»´ç ">
        </div>
        <p style="font-size:0.9rem; color:#999;">ç‚¹å‡»ä¸‹æ–¹å¤åˆ¶å¾®ä¿¡å·</p>
        <div style="background:#f0f0f0; padding:10px; border-radius:6px; cursor:pointer;" onclick="copyGWx()">KotoHelp2025 ğŸ“‹</div>
    </div>
</div>

<script>
    function openGlobalModal(name) {
        document.getElementById('gModalService').innerText = name;
        document.getElementById('globalModal').classList.add('show');
    }
    function closeGlobalModal() {
        document.getElementById('globalModal').classList.remove('show');
    }
    document.getElementById('globalModal').addEventListener('click', function(e){
        if(e.target === this) closeGlobalModal();
    });
    function copyGWx() {
        navigator.clipboard.writeText('KotoHelp2025').then(() => alert('å¾®ä¿¡å·å·²å¤åˆ¶'));
    }
</script>
