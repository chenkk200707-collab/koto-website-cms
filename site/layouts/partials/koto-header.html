<style>
    /* --- 1. å¼ºåŠ›æ¸…é™¤æ—§æ ·å¼å¹²æ‰° --- */
    /* éšè—æ‰€æœ‰æ—§çš„å¯¼èˆªæ ã€é¡¶éƒ¨æ¡ï¼Œé˜²æ­¢å‡ºç°æ£•è‰²è‰²å— */
    header:not(.koto-main-nav), nav:not(.koto-main-nav), .site-header, #header, .navbar, .top-bar { 
        display: none !important; 
    }

    /* --- 2. å…¨å±€å¸ƒå±€ä¿®æ­£ --- */
    body {
        margin: 0;
        padding: 0;
        /* [å…³é”®] ç»™æ‰€æœ‰é¡µé¢é¡¶éƒ¨å¢åŠ  90px çš„å†…è¾¹è·ï¼Œ
           è¿™æ ·å›ºå®šçš„å¯¼èˆªæ å°±ä¸ä¼šæŒ¡ä½ä¸‹é¢çš„æ ‡é¢˜æˆ–å¹¿å‘Šå›¾äº† */
        padding-top: 90px; 
        background-color: #fff;
        font-family: -apple-system, BlinkMacSystemFont, "Microsoft YaHei", sans-serif;
    }

    /* --- 3. æ–°å¯¼èˆªæ æ ·å¼ --- */
    :root { --k-red: #C41E3A; --k-dark: #2C3E50; }

    .koto-main-nav {
        background-color: white;
        height: 80px; /* å¯¼èˆªæ é«˜åº¦ */
        padding: 0 5%;
        display: flex !important;
        justify-content: space-between;
        align-items: center;
        box-shadow: 0 4px 10px rgba(0,0,0,0.05); /* åº•éƒ¨æ·¡æ·¡çš„é˜´å½± */
        
        /* å›ºå®šåœ¨é¡¶éƒ¨ */
        position: fixed; 
        top: 0; 
        left: 0; 
        width: 100%; 
        z-index: 99999; /* ä¿è¯åœ¨æœ€æœ€ä¸Šå±‚ */
        box-sizing: border-box;
    }

    /* Logo åŒºåŸŸ */
    .nav-logo { height: 100%; display: flex; align-items: center; }
    .nav-logo a { height: 60px; display: block; }
    .nav-logo img { 
        height: 100%; 
        width: auto; 
        max-width: 200px; 
        object-fit: contain; 
        display: block; 
    }

    /* èœå•é“¾æ¥åŒºåŸŸ */
    .nav-links { display: flex; gap: 25px; align-items: center; }

    .nav-item {
        font-size: 16px; 
        font-weight: 800; 
        color: var(--k-red); 
        padding: 10px 5px; 
        cursor: pointer; 
        text-decoration: none;
        background: none; 
        border: none; 
        font-family: inherit;
        transition: all 0.2s;
    }
    .nav-item:hover { opacity: 0.7; transform: translateY(-1px); }

    /* é¢„çº¦æŒ‰é’®ç‰¹åˆ«æ ·å¼ */
    .nav-btn-cta {
        background-color: var(--k-red); 
        color: white !important;
        padding: 10px 25px; 
        border-radius: 50px; 
        font-weight: 800; 
        font-size: 16px;
        box-shadow: 0 4px 12px rgba(196, 30, 58, 0.3); 
        text-decoration: none; 
        white-space: nowrap;
        transition: transform 0.2s;
    }
    .nav-btn-cta:hover { transform: scale(1.05); background-color: #a01830; }

    /* --- 4. å¼¹çª— (Modal) æ ·å¼ --- */
    .g-modal-overlay {
        position: fixed; top: 0; left: 0; width: 100%; height: 100%;
        background: rgba(0,0,0,0.6); backdrop-filter: blur(5px);
        z-index: 100000; 
        display: none; /* é»˜è®¤éšè— */
        align-items: center; justify-content: center;
    }
    .g-modal-overlay.show { display: flex; } /* æ¿€æ´»æ—¶æ˜¾ç¤º */

    .g-modal-box {
        background: white; width: 90%; max-width: 420px; border-radius: 16px; 
        padding: 40px; text-align: center; position: relative;
        box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        animation: modalFadeIn 0.3s ease;
    }
    @keyframes modalFadeIn { from {opacity:0; transform:translateY(20px);} to {opacity:1; transform:translateY(0);} }

    .g-qr-box {
        width: 200px; height: 200px; background: #f9f9f9; margin: 25px auto; 
        display: flex; align-items: center; justify-content: center; border-radius: 8px;
    }
    .g-qr-box img { width: 90%; height: 90%; object-fit: contain; }
</style>

<nav class="koto-main-nav">
    <div class="nav-logo">
        <a href="/">
            <img src="/images/logo-koto.png" alt="KOTO Logo">
        </a>
    </div>
    
    <div class="nav-links">
        <a href="/capsules/" class="nav-item">è‹±è¯­èƒ¶å›Š</a>
        <a href="/study/" class="nav-item">åŒ—ç¾ç•™å­¦</a>
        <a href="/canada/" class="nav-item">åŠ æ‹¿å¤§ç§»æ°‘</a>
        <button onclick="openGlobalModal('ç¾å›½ç§»æ°‘è§„åˆ’')" class="nav-item">ç¾å›½ç§»æ°‘</button>
        <a href="/cases/" class="nav-item">æˆåŠŸæ¡ˆä¾‹</a>
        <a href="#page-bottom" class="nav-btn-cta" onclick="openGlobalModal('é€šç”¨å’¨è¯¢')">é¢„çº¦å’¨è¯¢</a>
    </div>
</nav>

<div class="g-modal-overlay" id="globalModal">
    <div class="g-modal-box">
        <div style="position:absolute; top:15px; right:20px; font-size:24px; color:#ccc; cursor:pointer;" onclick="closeGlobalModal()">&times;</div>
        
        <h3 style="margin:0 0 10px 0; color:#333;">é¢„çº¦å’¨è¯¢</h3>
        <p style="color:#666; margin:0; font-size:14px;">æ‚¨æ­£åœ¨å’¨è¯¢ï¼š</p>
        <p style="color:#C41E3A; font-weight:bold; margin:5px 0 0 0; font-size:18px;" id="gModalService">...</p>
        
        <div class="g-qr-box">
            <img src="/images/qrcode.png" alt="å®¢æœäºŒç»´ç ">
        </div>
        
        <p style="font-size:13px; color:#999; margin-bottom:10px;">ç‚¹å‡»ä¸‹æ–¹å¤åˆ¶å¾®ä¿¡å·</p>
        <div style="background:#f0f0f0; padding:12px; border-radius:8px; cursor:pointer; font-weight:bold; color:#333;" onclick="copyGWx()">
            KotoHelp2025 ğŸ“‹
        </div>
    </div>
</div>

<script>
    // å¼¹çª—æ§åˆ¶é€»è¾‘
    function openGlobalModal(serviceName) {
        var name = serviceName || "é€šç”¨å’¨è¯¢";
        var label = document.getElementById('gModalService');
        if(label) label.innerText = name;
        var modal = document.getElementById('globalModal');
        if(modal) modal.classList.add('show');
    }

    function closeGlobalModal() {
        var modal = document.getElementById('globalModal');
        if(modal) modal.classList.remove('show');
    }

    // ç‚¹å‡»é˜´å½±åŒºåŸŸå…³é—­å¼¹çª—
    var modalOverlay = document.getElementById('globalModal');
    if(modalOverlay) {
        modalOverlay.addEventListener('click', function(e){
            if(e.target === this) closeGlobalModal();
        });
    }

    // å¤åˆ¶å¾®ä¿¡å·åŠŸèƒ½
    function copyGWx() {
        if(navigator.clipboard) {
            navigator.clipboard.writeText('KotoHelp2025').then(function() {
                alert('å¾®ä¿¡å·å·²å¤åˆ¶ï¼šKotoHelp2025');
            }).catch(function() {
                alert('è¯·æ‰‹åŠ¨æ·»åŠ å¾®ä¿¡ï¼šKotoHelp2025');
            });
        } else {
            alert('è¯·æ‰‹åŠ¨æ·»åŠ å¾®ä¿¡ï¼šKotoHelp2025');
        }
    }
</script>
