<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CRS ç§»æ°‘åˆ†æ•°è¯„ä¼° | KOTO Immigration</title>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #C41E3A;
            --secondary: #2C3E50;
            --bg: #F5F7FA;
        }
        body { margin: 0; font-family: 'Noto Sans SC', sans-serif; background-color: var(--bg); color: #333; }
        
        /* é¡¶éƒ¨å¯¼èˆª */
        header { background: white; padding: 15px 5%; display: flex; justify-content: space-between; align-items: center; box-shadow: 0 2px 10px rgba(0,0,0,0.05); }
        .logo { font-weight: 700; font-size: 1.2rem; color: var(--secondary); text-decoration: none; }
        .back-link { color: #666; text-decoration: none; font-size: 0.9rem; display: flex; align-items: center; }
        .back-link:hover { color: var(--primary); }

        /* è®¡ç®—å™¨å®¹å™¨ - å±…ä¸­å¡ç‰‡è®¾è®¡ */
        .container { max-width: 800px; margin: 40px auto; padding: 0 20px; }
        .calc-card {
            background: white;
            border-radius: 20px;
            padding: 50px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.08);
        }

        h1 { text-align: center; color: var(--secondary); margin-bottom: 40px; font-size: 1.8rem; }
        
        /* è¡¨å•ç¾åŒ– */
        .form-section { margin-bottom: 30px; border-bottom: 1px solid #eee; padding-bottom: 30px; }
        .form-section:last-child { border-bottom: none; }
        
        label { display: block; margin-bottom: 10px; font-weight: 600; color: var(--secondary); }
        
        /* ä¸‹æ‹‰æ¡†å’Œè¾“å…¥æ¡†æ ·å¼ */
        select, input {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #eee;
            border-radius: 8px;
            font-size: 1rem;
            transition: 0.3s;
            box-sizing: border-box;
            font-family: inherit;
        }
        select:focus, input:focus { border-color: var(--primary); outline: none; background: #fffbfb; }
        
        /* é›…æ€è¾“å…¥ç½‘æ ¼ */
        .ielts-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; }
        
        /* æŒ‰é’® */
        .calc-btn {
            width: 100%;
            padding: 18px;
            background: var(--primary);
            color: white;
            border: none;
            border-radius: 50px;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            transition: 0.3s;
            margin-top: 20px;
        }
        .calc-btn:hover { background: #a0182f; transform: translateY(-2px); }

        /* ç»“æœå±•ç¤º */
        #result-area {
            margin-top: 30px;
            background: #2C3E50;
            color: white;
            padding: 30px;
            border-radius: 12px;
            text-align: center;
            display: none;
            animation: fadeIn 0.5s;
        }
        .score-big { font-size: 3rem; font-weight: bold; color: #FFD700; display: block; margin: 10px 0; }
        
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        /* é»˜è®¤ç°å­— */
        select:invalid, select option[value=""] { color: #999; }
        select { color: #333; }
    </style>
</head>
<body>

    <header>
        <a href="/" class="logo">KOTO <span style="color:var(--primary)">IMMIGRATION</span></a>
        <a href="/" class="back-link">â† è¿”å›é¦–é¡µ</a>
    </header>

    <div class="container">
        <div class="calc-card">
            <h1>Express Entry ç§»æ°‘åˆ†æ•°è‡ªæµ‹</h1>
            
            <div class="form-section">
                <label>1. æ‚¨çš„å¹´é¾„</label>
                <select id="age" required>
                    <option value="" disabled selected>è¯·é€‰æ‹©æ‚¨çš„å¹´é¾„åŒºé—´...</option>
                    <option value="12">18-29å² (110åˆ†)</option>
                    <option value="11">30å² (105åˆ†)</option>
                    <option value="10">31å² (99åˆ†)</option>
                    <option value="9">32å² (94åˆ†)</option>
                    <option value="8">33å² (88åˆ†)</option>
                    <option value="7">34å² (83åˆ†)</option>
                    <option value="6">35å² (77åˆ†)</option>
                    <option value="5">36å² (72åˆ†)</option>
                    <option value="4">37å² (66åˆ†)</option>
                    <option value="3">38å² (61åˆ†)</option>
                    <option value="2">39å² (55åˆ†)</option>
                    <option value="1">40-44å² (é€’å‡)</option>
                    <option value="0">45å²åŠä»¥ä¸Š (0åˆ†)</option>
                </select>
            </div>

            <div class="form-section">
                <label>2. æœ€é«˜å­¦å†</label>
                <select id="education" required>
                    <option value="" disabled selected>è¯·é€‰æ‹©æœ€é«˜å­¦å†...</option>
                    <option value="150">åšå£«å­¦ä½ (PhD)</option>
                    <option value="135">ç¡•å£«å­¦ä½ (Master's)</option>
                    <option value="128">åŒå­¦å† (å…¶ä¸­ä¸€ä¸ªä¸º3å¹´ä»¥ä¸Š)</option>
                    <option value="120">æœ¬ç§‘ (3å¹´ä»¥ä¸Š) / 3å¹´å¤§ä¸“</option>
                    <option value="98">2å¹´å¤§ä¸“/æ–‡å‡­</option>
                    <option value="90">1å¹´å¤§ä¸“/æ–‡å‡­</option>
                    <option value="30">é«˜ä¸­æ¯•ä¸š</option>
                </select>
            </div>

            <div class="form-section">
                <label>3. é›…æ€ Gç±»æˆç»© (IELTS General)</label>
                <div class="ielts-grid">
                    <div>
                        <input type="number" id="ielts-l" step="0.5" min="0" placeholder="å¬åŠ› (Listening)" oninput="if(value<0)value=0">
                    </div>
                    <div>
                        <input type="number" id="ielts-r" step="0.5" min="0" placeholder="é˜…è¯» (Reading)" oninput="if(value<0)value=0">
                    </div>
                    <div>
                        <input type="number" id="ielts-w" step="0.5" min="0" placeholder="å†™ä½œ (Writing)" oninput="if(value<0)value=0">
                    </div>
                    <div>
                        <input type="number" id="ielts-s" step="0.5" min="0" placeholder="å£è¯­ (Speaking)" oninput="if(value<0)value=0">
                    </div>
                </div>
            </div>

            <div class="form-section">
                <label>4. åŠ æ‹¿å¤§æœ¬åœ°å·¥ä½œç»éªŒ</label>
                <select id="can-exp" required>
                    <option value="" disabled selected>è¯·é€‰æ‹©å¹´é™...</option>
                    <option value="0">æ—  / ä¸æ»¡1å¹´</option>
                    <option value="40">1å¹´</option>
                    <option value="53">2å¹´</option>
                    <option value="64">3å¹´</option>
                    <option value="72">4å¹´</option>
                    <option value="80">5å¹´åŠä»¥ä¸Š</option>
                </select>
            </div>

            <div class="form-section">
                <label>5. æµ·å¤–(ä¸­å›½)å·¥ä½œç»éªŒ</label>
                <select id="foreign-exp" required>
                    <option value="" disabled selected>è¯·é€‰æ‹©å¹´é™...</option>
                    <option value="0">æ—  / ä¸æ»¡1å¹´</option>
                    <option value="1">1-2å¹´</option>
                    <option value="3">3å¹´åŠä»¥ä¸Š</option>
                </select>
            </div>

            <button class="calc-btn" onclick="calculateCRS()">æŸ¥çœ‹æˆ‘çš„åˆ†æ•°</button>

            <div id="result-area">
                <p>æ‚¨çš„ CRS é¢„ä¼°æ€»åˆ†</p>
                <span class="score-big" id="total-score">0</span>
                <p id="score-advice" style="opacity: 0.9; margin-top: 15px;">...</p>
                <div style="margin-top:20px; padding-top:20px; border-top:1px solid rgba(255,255,255,0.2); font-size:0.9rem; text-align:left;">
                    <p>å¾—åˆ†è¯¦æƒ…ï¼š</p>
                    <ul style="list-style:none; padding:0;">
                        <li>â€¢ æ ¸å¿ƒäººåŠ›èµ„æœ¬: <span id="core-score">0</span></li>
                        <li>â€¢ äº¤å‰é¡¹åŠ åˆ† (å­¦å†+è¯­è¨€ç­‰): <span id="transfer-score">0</span></li>
                    </ul>
                </div>
            </div>

        </div>
    </div>

    <script>
        function getCLB(type, score) {
            if (type === 'L') { if (score >= 8.5) return 10; if (score >= 8.0) return 9; if (score >= 7.5) return 8; if (score >= 6.0) return 7; return 5; }
            if (type === 'R') { if (score >= 8.0) return 10; if (score >= 7.0) return 9; if (score >= 6.5) return 8; if (score >= 6.0) return 7; return 5; }
            if (type === 'W' || type === 'S') { if (score >= 7.5) return 10; if (score >= 7.0) return 9; if (score >= 6.5) return 8; if (score >= 6.0) return 7; return 5; }
            return 0;
        }
        function getLangPoints(clb) { if (clb >= 10) return 34; if (clb === 9) return 31; if (clb === 8) return 23; if (clb === 7) return 17; return 0; }

        function calculateCRS() {
            // é˜²é”™å¤„ç†
            let ageVal = document.getElementById('age').value;
            let ageIdx = (ageVal === "") ? 0 : parseInt(ageVal);
            const ageMap = {12:110, 11:105, 10:99, 9:94, 8:88, 7:83, 6:77, 5:72, 4:66, 3:61, 2:55, 1:45, 0:0};
            let ageScore = ageMap[ageIdx] || 0;

            let eduVal = document.getElementById('education').value;
            let eduScore = (eduVal === "") ? 0 : parseInt(eduVal);

            let l = parseFloat(document.getElementById('ielts-l').value) || 0;
            let r = parseFloat(document.getElementById('ielts-r').value) || 0;
            let w = parseFloat(document.getElementById('ielts-w').value) || 0;
            let s = parseFloat(document.getElementById('ielts-s').value) || 0;

            // å†æ¬¡ç¡®ä¿éè´Ÿæ•°
            l = l < 0 ? 0 : l; r = r < 0 ? 0 : r; w = w < 0 ? 0 : w; s = s < 0 ? 0 : s;

            let clbL = getCLB('L', l); let clbR = getCLB('R', r); let clbW = getCLB('W', w); let clbS = getCLB('S', s);
            let langScore = getLangPoints(clbL) + getLangPoints(clbR) + getLangPoints(clbW) + getLangPoints(clbS);

            let canExpVal = document.getElementById('can-exp').value;
            let canWorkScore = (canExpVal === "") ? 0 : parseInt(canExpVal);

            let coreScore = ageScore + eduScore + langScore + canWorkScore;

            let transferScore = 0;
            let allCLB9 = (clbL>=9 && clbR>=9 && clbW>=9 && clbS>=9);
            let allCLB7 = (clbL>=7 && clbR>=7 && clbW>=7 && clbS>=7);
            let highEdu = (eduScore >= 128); 
            
            // äº¤å‰é¡¹è®¡ç®—
            let highCanWork = (canWorkScore >= 53); let midCanWork = (canWorkScore >= 40);
            if (highEdu && allCLB9) transferScore += 50; else if (highEdu && allCLB7) transferScore += 25; else if (!highEdu && allCLB9) transferScore += 25; else if (!highEdu && allCLB7) transferScore += 13; 
            if (highEdu && highCanWork) transferScore += 50; else if (highEdu && midCanWork) transferScore += 25; else if (!highEdu && highCanWork) transferScore += 25; else if (!highEdu && midCanWork) transferScore += 13;
            if (transferScore > 50) transferScore = 50;

            let forExpVal = document.getElementById('foreign-exp').value;
            let foreignExp = (forExpVal === "") ? 0 : parseInt(forExpVal);
            let foreignTransfer = 0;
            if (foreignExp >= 3 && allCLB9) foreignTransfer += 50; else if (foreignExp >= 3 && allCLB7) foreignTransfer += 25; else if (foreignExp >= 1 && allCLB9) foreignTransfer += 25; else if (foreignExp >= 1 && allCLB7) foreignTransfer += 13;
            if (foreignExp >= 3 && highCanWork) foreignTransfer += 50; else if (foreignExp >= 3 && midCanWork) foreignTransfer += 25; else if (foreignExp >= 1 && highCanWork) foreignTransfer += 25; else if (foreignExp >= 1 && midCanWork) foreignTransfer += 13;
            if (foreignTransfer > 50) foreignTransfer = 50;

            let totalTransfer = transferScore + foreignTransfer;
            if (totalTransfer > 100) totalTransfer = 100;

            let total = coreScore + totalTransfer;

            document.getElementById('result-area').style.display = 'block';
            document.getElementById('total-score').innerText = total;
            document.getElementById('core-score').innerText = coreScore;
            document.getElementById('transfer-score').innerText = totalTransfer;
            
            let advice = "";
            if (total >= 500) advice = "ğŸš€ æ‚¨çš„åˆ†æ•°æå…·ç«äº‰åŠ›ï¼Œå»ºè®®ç«‹å³è”ç³»æˆ‘ä»¬å…¥æ± ï¼";
            else if (total >= 450) advice = "âœ¨ æœ‰æœºä¼šè·é‚€ï¼å»ºè®®è€ƒè™‘çœæåå¢åŠ æŠŠæ¡ã€‚";
            else advice = "ğŸ“ˆ åˆ†æ•°æœ‰æå‡ç©ºé—´ï¼Œå»ºè®®è§„åˆ’ LMIA æˆ–ç•™å­¦åŠ åˆ†ã€‚";
            document.getElementById('score-advice').innerText = advice;
        }
    </script>
</body>
</html>
